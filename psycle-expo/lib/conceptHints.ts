// 心理学用語の簡潔な説明（問題の上に表示）
export const conceptHints: Record<string, string> = {
  // メンタルヘルス
  "認知的再評価": "💡 認知的再評価：ネガティブな出来事を別の視点から捉え直すことで感情を調整する技法",
  "マインドフルネス": "💡 マインドフルネス：今この瞬間の経験に、評価せずに意識を向ける実践法",
  "感情調整": "💡 感情調整：自分の感情を認識し、適切にコントロールする能力",
  "呼吸法": "💡 呼吸法：意識的に呼吸をコントロールすることで、自律神経を調整しリラックス効果を得る技法",
  "リラクゼーション": "💡 リラクゼーション：心身の緊張を解き、リラックスした状態にする技法の総称",
  "バイオフィードバック": "💡 バイオフィードバック：心拍数などの生理的データを可視化し、自己調整能力を高める技法",
  "ストレス管理": "💡 ストレス管理：ストレスの原因を特定し、対処法を用いて心身の健康を保つスキル",
  "レジリエンス": "💡 レジリエンス：困難な状況から回復し、適応する心の回復力",

  // 社会
  "共感": "💡 共感：他者の感情や立場を理解し、その人の視点から物事を見る能力",
  "積極的傾聴": "💡 積極的傾聴：相手の話に全神経を集中し、理解しようと努めながら聴く技法",
  "傾聴": "💡 積極的傾聴：相手の話に全神経を集中し、理解しようと努めながら聴く技法",
  "コミュニケーション": "💡 効果的なコミュニケーション：相手の立場を理解し、明確に意思を伝え合うスキル",

  // 仕事・生産性
  "ポモドーロ": "💡 ポモドーロ・テクニック：25分間集中して作業し、5分休憩するサイクルを繰り返すタイムマネジメント手法",
  "時間管理": "💡 時間管理：タスクに優先順位をつけ、効率的に時間を使う技術",
  "先延ばし": "💡 先延ばし（procrastination）：重要なタスクを後回しにしてしまう行動パターン",
  "実行意図": "💡 実行意図：「もし〜なら、〜する」という形で、具体的な状況と行動を事前に結びつける目標達成手法",
  "目標設定": "💡 目標設定：具体的で測定可能な目標を設定し、達成に向けて計画的に行動する技法",
  "自己効力感": "💡 自己効力感：自分が特定の課題を達成できるという信念。モチベーションとパフォーマンスに影響する",
  "集中力": "💡 集中力：注意を一つの対象に向け続ける能力。トレーニングで向上可能",

  // 健康
  "運動習慣": "💡 運動習慣：定期的な身体活動を生活に取り入れることで、身体的・精神的健康を向上させる",
  "睡眠衛生": "💡 睡眠衛生：質の高い睡眠を得るための環境や生活習慣の総称",
  "習慣": "💡 習慣形成：特定の行動を繰り返すことで自動化し、意識的な努力なしに実行できるようにすること",
  "栄養": "💡 栄養：健康維持に必要な食事のバランス。心身の健康に大きく影響する",
  "身体活動": "💡 身体活動：日常生活での体を動かす活動全般。健康増進に重要な要素",

  // 学習
  "想起練習": "💡 想起練習：記憶から情報を引き出す練習をすることで、長期記憶を強化する学習法",
  "分散学習": "💡 分散学習：学習を複数回に分けて行うことで、記憶の定着を高める手法",
  "間隔反復": "💡 間隔反復：学習した内容を、徐々に間隔を空けながら繰り返し復習することで長期記憶を形成する手法",
  "メタ認知": "💡 メタ認知：自分の思考プロセスを客観的に認識し、コントロールする能力",
  "ワーキングメモリ": "💡 ワーキングメモリ：情報を一時的に保持・処理する作業記憶。学習能力の基盤となる",
  "自己説明": "💡 自己説明：学習内容を自分の言葉で説明することで理解を深める学習技法",

  // お金
  "予算管理": "💡 予算管理：収入と支出を計画的に管理し、金銭的な目標を達成する技術",
  "衝動買い": "💡 衝動買い：計画外の購入をしてしまう行動。感情的な決定によって引き起こされることが多い",
  "メンタルアカウンティング": "💡 メンタルアカウンティング：心の中で異なる「口座」を作り、お金を分類して管理する心理的傾向",
  "金融リテラシー": "💡 金融リテラシー：お金に関する知識と判断力。貯蓄、投資、借入などを適切に管理する能力",
  "貯蓄": "💡 貯蓄：将来の目標や予期せぬ支出に備えて、お金を計画的に蓄える習慣",
};

// 問題文または選択肢から該当する概念を検出
export function detectConcept(question: string, choices: string[]): string | null {
  const allText = [question, ...choices].join(" ");

  for (const [keyword, hint] of Object.entries(conceptHints)) {
    if (allText.includes(keyword)) {
      return hint;
    }
  }

  return null;
}
